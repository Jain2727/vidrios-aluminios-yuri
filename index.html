<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cotizaciones - Vidrios y Aluminios Yuri</title>
<style>
  /* Fuente elegante para t√≠tulos */
  @import url('https://fonts.googleapis.com/css2?family=Merriweather:wght@700&display=swap');

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 20px;
    background: #f0f4fa;
    color: #003366;
  }

  h1, h2, h3 {
    font-family: 'Merriweather', serif;
    color: #003366;
    margin-bottom: 10px;
  }
  
  h1 {
    font-size: 2.4rem;
    letter-spacing: 1.2px;
    border-bottom: 3px solid #0059b3;
    padding-bottom: 6px;
    margin-bottom: 30px;
    text-transform: uppercase;
  }

  h2 {
    font-size: 1.6rem;
    margin-top: 30px;
    border-bottom: 2px solid #0073e6;
    padding-bottom: 4px;
  }

  h3 {
    font-size: 1.2rem;
    margin-top: 20px;
    color: #004080;
  }

  label {
    font-weight: 600;
    display: block;
    margin-bottom: 6px;
    color: #004080;
  }

  input, select, textarea {
    width: 100%;
    padding: 8px 10px;
    margin-bottom: 15px;
    border-radius: 6px;
    border: 2px solid #0073e6;
    font-size: 1rem;
    transition: border-color 0.3s ease;
    box-sizing: border-box;
  }
  input:focus, textarea:focus, select:focus {
    border-color: #003366;
    outline: none;
  }
  textarea {
    resize: vertical;
  }

  button {
    font-weight: 600;
    font-size: 1rem;
    padding: 10px 20px;
    border-radius: 7px;
    border: none;
    background-color: #0059b3;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-right: 10px;
    margin-top: 8px;
  }
  button:hover {
    background-color: #003d7a;
  }
  button.danger {
    background-color: #cc0000;
  }
  button.danger:hover {
    background-color: #990000;
  }

  /* Layout Flex */
  .flex-row {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
  }
  .flex-row > div {
    flex: 1 1 220px;
  }

  /* Panel sections */
  .panel {
    background: white;
    border-radius: 12px;
    padding: 25px 30px;
    box-shadow: 0 4px 8px rgb(0 51 102 / 0.1);
    margin-bottom: 40px;
    border: 1.5px solid #0073e6;
  }

  /* Tabla */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    box-shadow: 0 2px 5px rgb(0 51 102 / 0.1);
    border-radius: 8px;
    overflow: hidden;
    background: white;
    border: 1.5px solid #0073e6;
  }
  thead tr {
    background-color: #0059b3;
    color: white;
    font-weight: 700;
    font-size: 0.95rem;
  }
  thead tr th {
    padding: 14px 12px;
    border-right: 1px solid #004080;
    text-align: center;
  }
  thead tr th:last-child {
    border-right: none;
  }

  tbody tr:hover {
    background-color: #dbe9ff;
  }
  tbody tr td {
    border-right: 1px solid #0073e6;
    padding: 12px 10px;
    font-size: 0.95rem;
    color: #003366;
    vertical-align: middle;
    text-align: center;
  }
  tbody tr td.left {
    text-align: left;
  }
  tbody tr td:last-child {
    border-right: none;
  }

  /* Input de b√∫squeda */
  #buscarCliente {
    width: 300px;
    padding: 10px 15px;
    border: 2px solid #0073e6;
    border-radius: 8px;
    font-size: 1rem;
    margin-bottom: 10px;
  }

  /* Footer */
  .footer {
    background-color: #0059b3;
    color: white;
    padding: 15px;
    font-size: 0.95rem;
    font-weight: 600;
    text-align: center;
    border-radius: 0 0 12px 12px;
    user-select: none;
  }

  /* Responsive */
  @media (max-width: 900px) {
    .flex-row > div {
      flex: 1 1 100%;
    }
    #buscarCliente {
      width: 100%;
      margin-bottom: 20px;
    }
  }
</style>
</head>
<body>

<h1>Vidrios y Aluminios Yuri</h1>

<section class="panel" id="dashboard">
  <h2>üìã Historial de Cotizaciones</h2>
  <input type="text" id="buscarCliente" placeholder="Buscar por nombre o DNI/RUC..." oninput="filtrarHistorial()" />
  <table>
    <thead>
      <tr>
        <th>N¬∞ Cotizaci√≥n</th>
        <th>Cliente</th>
        <th>Fecha</th>
        <th>Total (S/)</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody id="historialBody">
      <!-- Historial cargado aqu√≠ -->
    </tbody>
  </table>
  <button onclick="nuevaCotizacion()">+ Nueva Cotizaci√≥n</button>
</section>

<section class="panel" id="formCotizacion" style="display:none;">
  <h2>üìù Crear / Editar Cotizaci√≥n</h2>

  <div class="flex-row">
    <div>
      <label for="numeroCotizacion">N¬∞ Cotizaci√≥n</label>
      <input type="text" id="numeroCotizacion" disabled />
    </div>
    <div>
      <label for="fechaEmision">Fecha de Emisi√≥n</label>
      <input type="date" id="fechaEmision" disabled />
    </div>
    <div>
      <label for="fechaValidez">V√°lida hasta</label>
      <input type="date" id="fechaValidez" disabled />
    </div>
  </div>

  <h3>Datos del Cliente</h3>
  <label for="clienteNombre">Nombre</label>
  <input type="text" id="clienteNombre" placeholder="Nombre completo" required />

  <div class="flex-row">
    <div>
      <label for="clienteRuc">DNI / RUC</label>
      <input type="text" id="clienteRuc" placeholder="Documento" required />
    </div>
    <div>
      <label for="clienteTelefono">Tel√©fono</label>
      <input type="text" id="clienteTelefono" placeholder="Tel√©fono o celular" />
    </div>
  </div>

  <label for="clienteDireccion">Direcci√≥n</label>
  <textarea id="clienteDireccion" rows="2" placeholder="Direcci√≥n completa"></textarea>

  <h3>Servicios (√çtems)</h3>

  <div class="flex-row">
    <div>
      <label for="itemCodigo">C√≥digo</label>
      <input type="text" id="itemCodigo" placeholder="C√≥digo" />
    </div>
    <div style="flex: 2 1 300px;">
      <label for="itemDescripcion">Descripci√≥n</label>
      <input type="text" id="itemDescripcion" placeholder="Ej: instalaci√≥n ventana aluminio serie 25" required />
    </div>
    <div>
      <label for="itemMedidas">Medidas (Alto x Ancho)</label>
      <input type="text" id="itemMedidas" placeholder="Ej: 1.2m x 0.8m" />
    </div>
    <div>
      <label for="itemCantidad">Cantidad</label>
      <input type="number" id="itemCantidad" min="1" value="1" required />
    </div>
    <div>
      <label for="itemPrecio">Precio Unitario (S/)</label>
      <input type="number" id="itemPrecio" min="0" step="0.01" value="0" required />
    </div>
  </div>

  <button onclick="agregarItem()">Agregar √çtem</button>

  <table id="tablaItems">
    <thead>
      <tr>
        <th>√çtem</th>
        <th>C√≥digo</th>
        <th>Descripci√≥n</th>
        <th>Medidas</th>
        <th>Cantidad</th>
        <th>Precio Unit.</th>
        <th>Subtotal</th>
        <th>Eliminar</th>
      </tr>
    </thead>
    <tbody>
      <!-- Items -->
    </tbody>
  </table>

  <div style="max-width: 360px; margin-left:auto; font-size:1.1rem; font-weight:600; color:#004080;">
    <p>Subtotal: S/ <span id="subtotal">0.00</span></p>
    <p>IGV (18%): S/ <span id="igv">0.00</span></p>
    <p style="font-size:1.3rem; font-weight:700; margin-top:6px;">Total: S/ <span id="total">0.00</span></p>
  </div>

  <div style="margin-top: 10px;">
    <button onclick="guardarCotizacion()">Guardar en Base de Datos</button>
    <button onclick="generarPDF()">Descargar PDF</button>
    <button onclick="exportarImagen()">Exportar Imagen</button>
    <button onclick="enviarWhatsApp()">Enviar por WhatsApp</button>
    <button class="danger" onclick="cancelarEdicion()">Cancelar</button>
  </div>
</section>

<div class="footer">
  CC.HACCA S/N OMACHA - PARURO - CUSCO | Correo: hermozayurihermozapuelles@gmail.com | Cel: 993 963 381
</div>

<!-- Librer√≠as -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<script>
(() => {
  let cotizaciones = JSON.parse(localStorage.getItem('cotizaciones')) || [];
  let editandoId = null;
  let items = [];

  const dashboard = document.getElementById('dashboard');
  const formCotizacion = document.getElementById('formCotizacion');
  const historialBody = document.getElementById('historialBody');
  const buscarClienteInput = document.getElementById('buscarCliente');

  const numeroCotizacionInput = document.getElementById('numeroCotizacion');
  const fechaEmisionInput = document.getElementById('fechaEmision');
  const fechaValidezInput = document.getElementById('fechaValidez');
  const clienteNombreInput = document.getElementById('clienteNombre');
  const clienteRucInput = document.getElementById('clienteRuc');
  const clienteTelefonoInput = document.getElementById('clienteTelefono');
  const clienteDireccionInput = document.getElementById('clienteDireccion');
  const itemCodigoInput = document.getElementById('itemCodigo');
  const itemDescripcionInput = document.getElementById('itemDescripcion');
  const itemMedidasInput = document.getElementById('itemMedidas');
  const itemCantidadInput = document.getElementById('itemCantidad');
  const itemPrecioInput = document.getElementById('itemPrecio');
  const tablaItemsBody = document.querySelector('#tablaItems tbody');
  const subtotalSpan = document.getElementById('subtotal');
  const igvSpan = document.getElementById('igv');
  const totalSpan = document.getElementById('total');

  cargarHistorial();

  function cargarHistorial(filtro='') {
    historialBody.innerHTML = '';
    let listaFiltrada = cotizaciones;
    if (filtro) {
      const f = filtro.toLowerCase();
      listaFiltrada = cotizaciones.filter(c => 
        c.clienteNombre.toLowerCase().includes(f) || 
        c.clienteRuc.toLowerCase().includes(f));
    }
    if(listaFiltrada.length === 0){
      historialBody.innerHTML = `<tr><td colspan="6" style="text-align:center;">No hay cotizaciones.</td></tr>`;
      return;
    }
    listaFiltrada.forEach(c => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${c.numeroCotizacion}</td>
        <td class="left">${c.clienteNombre}</td>
        <td>${c.fechaEmision}</td>
        <td>S/ ${c.total.toFixed(2)}</td>
        <td>${c.estado || 'Pendiente'}</td>
        <td>
          <button onclick="editarCotizacion('${c.id}')">‚úèÔ∏è</button>
          <button onclick="eliminarCotizacion('${c.id}')" class="danger">üóëÔ∏è</button>
        </td>
      `;
      historialBody.appendChild(tr);
    });
  }

  window.filtrarHistorial = () => {
    cargarHistorial(buscarClienteInput.value);
  }

  window.nuevaCotizacion = () => {
    editandoId = null;
    items = [];
    limpiarFormulario();
    fechaEmisionInput.valueAsDate = new Date();
    let fechaVal = new Date();
    fechaVal.setDate(fechaVal.getDate() + 7);
    fechaValidezInput.valueAsDate = fechaVal;

    const anio = new Date().getFullYear();
    const maxNum = cotizaciones.reduce((max, c) => {
      const n = parseInt(c.numeroCotizacion.split('-')[1]);
      return n > max ? n : max;
    }, 0);
    const nuevoNum = maxNum + 1;
    numeroCotizacionInput.value = `${anio}-${nuevoNum.toString().padStart(4,'0')}`;

    mostrarFormulario(true);
    actualizarTablaItems();
    actualizarTotales();
  }

  function mostrarFormulario(mostrar) {
    dashboard.style.display = mostrar ? 'none' : 'block';
    formCotizacion.style.display = mostrar ? 'block' : 'none';
  }

  function limpiarFormulario() {
    numeroCotizacionInput.value = '';
    fechaEmisionInput.value = '';
    fechaValidezInput.value = '';
    clienteNombreInput.value = '';
    clienteRucInput.value = '';
    clienteTelefonoInput.value = '';
    clienteDireccionInput.value = '';
    itemCodigoInput.value = '';
    itemDescripcionInput.value = '';
    itemMedidasInput.value = '';
    itemCantidadInput.value = 1;
    itemPrecioInput.value = 0;
    items = [];
    actualizarTablaItems();
    actualizarTotales();
  }

  window.agregarItem = () => {
    const codigo = itemCodigoInput.value.trim();
    const descripcion = itemDescripcionInput.value.trim();
    const medidas = itemMedidasInput.value.trim();
    const cantidad = parseFloat(itemCantidadInput.value);
    const precio = parseFloat(itemPrecioInput.value);

    if(!descripcion) {
      alert('La descripci√≥n es obligatoria');
      return;
    }
    if (cantidad <= 0 || precio < 0) {
      alert('Cantidad y precio deben ser valores positivos');
      return;
    }
    items.push({codigo, descripcion, medidas, cantidad, precio, subtotal: cantidad*precio});
    actualizarTablaItems();
    limpiarItemInputs();
    actualizarTotales();
  }

  function limpiarItemInputs() {
    itemCodigoInput.value = '';
    itemDescripcionInput.value = '';
    itemMedidasInput.value = '';
    itemCantidadInput.value = 1;
    itemPrecioInput.value = 0;
  }

  function actualizarTablaItems() {
    tablaItemsBody.innerHTML = '';
    if(items.length === 0) {
      tablaItemsBody.innerHTML = `<tr><td colspan="8" style="text-align:center;">No hay √≠tems agregados.</td></tr>`;
      return;
    }
    items.forEach((item, idx) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${idx+1}</td>
        <td>${item.codigo || '-'}</td>
        <td class="left">${item.descripcion}</td>
        <td>${item.medidas || '-'}</td>
        <td>${item.cantidad}</td>
        <td>S/ ${item.precio.toFixed(2)}</td>
        <td>S/ ${(item.cantidad*item.precio).toFixed(2)}</td>
        <td><button onclick="eliminarItem(${idx})" class="danger">X</button></td>
      `;
      tablaItemsBody.appendChild(tr);
    });
  }

  window.eliminarItem = (index) => {
    items.splice(index, 1);
    actualizarTablaItems();
    actualizarTotales();
  }

  function actualizarTotales() {
    const subtotal = items.reduce((acc, i) => acc + i.subtotal, 0);
    const igv = subtotal * 0.18;
    const total = subtotal + igv;

    subtotalSpan.textContent = subtotal.toFixed(2);
    igvSpan.textContent = igv.toFixed(2);
    totalSpan.textContent = total.toFixed(2);
  }

  window.guardarCotizacion = () => {
    if(!clienteNombreInput.value.trim() || !clienteRucInput.value.trim()) {
      alert('Por favor completa los datos del cliente');
      return;
    }
    if(items.length === 0) {
      alert('Agrega al menos un √≠tem');
      return;
    }
    const cotizacion = {
      id: editandoId || Date.now().toString(),
      numeroCotizacion: numeroCotizacionInput.value,
      fechaEmision: fechaEmisionInput.value,
      fechaValidez: fechaValidezInput.value,
      clienteNombre: clienteNombreInput.value.trim(),
      clienteRuc: clienteRucInput.value.trim(),
      clienteTelefono: clienteTelefonoInput.value.trim(),
      clienteDireccion: clienteDireccionInput.value.trim(),
      items: [...items],
      subtotal: parseFloat(subtotalSpan.textContent),
      igv: parseFloat(igvSpan.textContent),
      total: parseFloat(totalSpan.textContent),
      estado: 'Pendiente',
    };

    if(editandoId) {
      const idx = cotizaciones.findIndex(c => c.id === editandoId);
      cotizaciones[idx] = cotizacion;
    } else {
      cotizaciones.push(cotizacion);
    }
    localStorage.setItem('cotizaciones', JSON.stringify(cotizaciones));
    alert('Cotizaci√≥n guardada');
    mostrarFormulario(false);
    cargarHistorial();
  }

  window.editarCotizacion = (id) => {
    const cotizacion = cotizaciones.find(c => c.id === id);
    if(!cotizacion) return;
    editandoId = id;
    mostrarFormulario(true);

    numeroCotizacionInput.value = cotizacion.numeroCotizacion;
    fechaEmisionInput.value = cotizacion.fechaEmision;
    fechaValidezInput.value = cotizacion.fechaValidez;
    clienteNombreInput.value = cotizacion.clienteNombre;
    clienteRucInput.value = cotizacion.clienteRuc;
    clienteTelefonoInput.value = cotizacion.clienteTelefono;
    clienteDireccionInput.value = cotizacion.clienteDireccion;
    items = [...cotizacion.items];
    actualizarTablaItems();
    actualizarTotales();
  }

  window.eliminarCotizacion = (id) => {
    if(confirm('¬øEliminar esta cotizaci√≥n?')) {
      cotizaciones = cotizaciones.filter(c => c.id !== id);
      localStorage.setItem('cotizaciones', JSON.stringify(cotizaciones));
      cargarHistorial();
    }
  }

  window.cancelarEdicion = () => {
    mostrarFormulario(false);
  }

  window.generarPDF = async () => {
    if(items.length === 0) {
      alert('Agrega al menos un √≠tem para generar PDF');
      return;
    }

    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    // Datos empresa y cliente
    const empresa = {
      nombre: "VIDRIOS Y ALUMINIOS YURI",
      ruc: "10617365036",
      direccion: "CC.HACCA S/N OMACHA - PARURO - CUSCO",
      correo: "hermozayurihermozapuelles@gmail.com",
      celular: "993 963 381",
      cuentaBCP: "52671107164027",
      cci: "00 2526 1711 0716 4027 21"
    };
    const cliente = {
      nombre: clienteNombreInput.value.trim() || "---",
      ruc: clienteRucInput.value.trim() || "---",
      telefono: clienteTelefonoInput.value.trim() || "---",
      direccion: clienteDireccionInput.value.trim() || "---"
    };

    // Fecha emisi√≥n y validez
    const fechaEmision = fechaEmisionInput.value ? new Date(fechaEmisionInput.value) : new Date();
    const fechaValidez = fechaValidezInput.value ? new Date(fechaValidezInput.value) : new Date(fechaEmision.getTime() + 7*24*60*60*1000);

    // Encabezado
    doc.setFontSize(16);
    doc.setFont("helvetica", "bold");
    doc.setTextColor("#003366");
    doc.text(empresa.nombre, 10, 15);

    doc.setFontSize(10);
    doc.setFont("helvetica", "normal");
    doc.text(`RUC: ${empresa.ruc}`, 10, 22);
    doc.text(`Direcci√≥n: ${empresa.direccion}`, 10, 28);

    doc.setFontSize(12);
    doc.setFont("helvetica", "bold");
    doc.text("COTIZACI√ìN", 160, 15);

    doc.setFontSize(9);
    doc.setFont("helvetica", "normal");
    doc.text(`Fecha emisi√≥n: ${fechaEmision.toLocaleDateString('es-PE')}`, 160, 20);
    doc.text(`V√°lida hasta: ${fechaValidez.toLocaleDateString('es-PE')}`, 160, 26);

    // N√∫mero de cotizaci√≥n
    doc.setFontSize(11);
    doc.setFont("helvetica", "bold");
    doc.text(`Cotizaci√≥n N¬∞ ${numeroCotizacionInput.value}`, 10, 40);

    // Datos cliente
    doc.setFontSize(11);
    doc.text("DATOS CLIENTE", 10, 50);
    doc.setFont("helvetica", "normal");
    doc.text(`Nombre: ${cliente.nombre}`, 10, 56);
    doc.text(`RUC/DNI: ${cliente.ruc}`, 10, 62);
    doc.text(`Tel√©fono: ${cliente.telefono}`, 10, 68);
    doc.text(`Direcci√≥n: ${cliente.direccion}`, 10, 74);

    // Tabla encabezado
    const startY = 85;
    doc.setFillColor(0, 102, 204);
    doc.setTextColor(255, 255, 255);
    doc.rect(10, startY - 7, 190, 8, 'F');

    doc.setFontSize(10);
    doc.text("√çtem", 12, startY);
    doc.text("C√≥digo", 27, startY);
    doc.text("Descripci√≥n", 55, startY);
    doc.text("Medidas", 120, startY);
    doc.text("Cantidad", 145, startY);
    doc.text("Precio Unit.", 170, startY);
    doc.text("Subtotal", 195, startY);

    doc.setTextColor(0, 0, 0);

    // Datos tabla
    let posY = startY + 6;
    const maxItemsPerPage = 25;
    items.forEach((item, index) => {
      if(index > 0 && index % maxItemsPerPage === 0){
        doc.addPage();
        posY = 20;
      }
      doc.text(`${index + 1}`, 12, posY);
      doc.text(item.codigo || "-", 27, posY);
      doc.text(item.descripcion, 55, posY, { maxWidth: 55 });
      doc.text(item.medidas || "-", 120, posY);
      doc.text(item.cantidad.toString(), 145, posY);
      doc.text(`S/ ${item.precio.toFixed(2)}`, 170, posY);
      doc.text(`S/ ${(item.cantidad * item.precio).toFixed(2)}`, 195, posY);
      posY += 7;
    });

    // Totales
    const subtotal = items.reduce((a,b) => a + b.subtotal, 0);
    const igv = subtotal * 0.18;
    const total = subtotal + igv;

    posY += 12;
    doc.setFont("helvetica", "bold");
    doc.text(`SUBTOTAL: S/ ${subtotal.toFixed(2)}`, 130, posY);
    posY += 7;
    doc.text(`IGV (18%): S/ ${igv.toFixed(2)}`, 130, posY);
    posY += 7;
    doc.text(`TOTAL: S/ ${total.toFixed(2)}`, 130, posY);

    // M√©todo de pago y firma
    posY += 15;
    doc.setFontSize(10);
    doc.text("M√âTODO DE PAGO", 10, posY);
    posY += 6;
    doc.setFont("helvetica", "normal");
    doc.text(`Cuenta BCP: ${empresa.cuentaBCP}`, 10, posY);
    posY += 6;
    doc.text(`CCI: ${empresa.cci}`, 10, posY);

    posY += 25;
    doc.text("Fecha y firma:", 10, posY);

    // Pie de p√°gina azul
    const pageHeight = doc.internal.pageSize.height;
    doc.setFillColor(0, 102, 204);
    doc.rect(0, pageHeight - 20, 210, 20, 'F');
    doc.setTextColor(255, 255, 255);
    doc.setFontSize(9);
    doc.text(empresa.direccion, 10, pageHeight - 12);
    doc.text(`Correo: ${empresa.correo} | Cel: ${empresa.celular}`, 10, pageHeight - 5);

    doc.save(`Cotizacion_${cliente.nombre}_${numeroCotizacionInput.value}.pdf`);
  };

  window.exportarImagen = () => {
    html2canvas(formCotizacion).then(canvas => {
      canvas.toBlob(blob => {
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = `Cotizacion_${clienteNombreInput.value.trim() || 'cliente'}.png`;
        a.click();
      });
    });
  };

  window.enviarWhatsApp = () => {
    if(!clienteNombreInput.value.trim() || !clienteRucInput.value.trim()) {
      alert('Debe ingresar nombre y DNI/RUC del cliente para enviar por WhatsApp');
      return;
    }
    const texto = `Hola, ${clienteNombreInput.value.trim()}.\n\nTe env√≠o la cotizaci√≥n N¬∞ ${numeroCotizacionInput.value}.\nTotal: S/ ${totalSpan.textContent}.\nGracias por tu preferencia.`;

    // WhatsApp URL (sin archivo PDF, porque es local)
    const url = `https://wa.me/?text=${encodeURIComponent(texto)}`;
    window.open(url, '_blank');
  };
})();
</script>

</body>
</html>
